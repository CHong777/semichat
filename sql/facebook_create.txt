select * from chatprofile;

--update chatprofile set chatprofileno = 25 where clientid = 'hi';


-- 2019-11-26 유진 / 동빈나 회원
-- 테이블 삭제
DROP TABLE CHAT;
DROP TABLE CHATPROFILE;
--DROP TABLE MESSENGER;
DROP TABLE MEMBER;

--시퀀스 삭제
DROP SEQUENCE chat_seq;
DROP SEQUENCE CHATPROFILE_seq;
--DROP SEQUENCE msgNo_seq;

--멤버 생성
CREATE TABLE MEMBER (   
   USERID VARCHAR2(20) PRIMARY KEY, 
   USERPASSWORD VARCHAR2(20), 
   USERNAME VARCHAR2(20), 
   USERAGE NUMBER, 
   USERGENDER VARCHAR2(20), 
   USEREMAIL VARCHAR2(50), 
   USERPROFILE VARCHAR2(50), 
   USERMSG VARCHAR2(20)
);

--채팅 프로필 생성
CREATE TABLE CHATPROFILE (
chatProfileNo NUMBER NOT NULL PRIMARY KEY,
messengerNo NUMBER NOT NULL,
clientID VARCHAR2(20) NOT NULL,
status NUMBER NOT NULL,
counselorID VARCHAR(20),
isFixedMatch NUMBER NOT NULL,
lastChatDate VARCHAR2(30),
topFixedNum NUMBER NOT NULL

);

CREATE SEQUENCE CHATPROFILE_seq;

-- 채팅 테이블 생성
CREATE TABLE CHAT (
    chatNo NUMBER NOT NULL PRIMARY KEY,
    chatProfileNo NUMBER NOT NULL,
    fromID VARCHAR2(20) NOT NULL,
    toID VARCHAR2(20) NOT NULL,
    chatContent VARCHAR2(500) NOT NULL,
    messageType NUMBER NOT NULL,
    chatTIME VARCHAR2(30) NOT NULL,
    chatRead NUMBER NOT NULL
);

-- 채팅 테이블 시퀀스 생성
CREATE SEQUENCE chat_seq;
ALTER TABLE CHAT ADD CONSTRAINT chatProfileNo_fk FOREIGN KEY(chatProfileNo) REFERENCES CHATPROFILE(chatProfileNo);

commit;
